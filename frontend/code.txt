================================================================================
                        AICRUIT - AI-POWERED RESUME ANALYZER
                           COMPLETE PROJECT SOURCE CODE
================================================================================

Generated: 2026-01-25
Project: AIcruit - Smart Resume Analysis powered by LangChain + Gemini AI

================================================================================
                               FOLDER STRUCTURE
================================================================================

/
â”œâ”€â”€ .env
â”œâ”€â”€ eslint.config.js
â”œâ”€â”€ index.html
â”œâ”€â”€ README.md
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ placeholder.svg
â”‚   â””â”€â”€ robots.txt
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ App.css
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ index.css
â”‚   â”œâ”€â”€ vite-env.d.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ AnalysisHistory.tsx
â”‚   â”‚   â”œâ”€â”€ AnalyzerSection.tsx
â”‚   â”‚   â”œâ”€â”€ FileUpload.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ HeroSection.tsx
â”‚   â”‚   â”œâ”€â”€ LoginPrompt.tsx
â”‚   â”‚   â”œâ”€â”€ NavLink.tsx
â”‚   â”‚   â”œâ”€â”€ ResultsSection.tsx
â”‚   â”‚   â”œâ”€â”€ ResumeChat.tsx
â”‚   â”‚   â”œâ”€â”€ ResumeGuideSection.tsx
â”‚   â”‚   â”œâ”€â”€ ScoreCard.tsx
â”‚   â”‚   â”œâ”€â”€ ScoreCircle.tsx
â”‚   â”‚   â”œâ”€â”€ TailoredResumeSection.tsx
â”‚   â”‚   â”œâ”€â”€ TextInput.tsx
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthModal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ UserMenu.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â”œâ”€â”€ ApiKeyDialog.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProfileSettingsDialog.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚       â”œâ”€â”€ accordion.tsx
â”‚   â”‚       â”œâ”€â”€ alert.tsx
â”‚   â”‚       â”œâ”€â”€ alert-dialog.tsx
â”‚   â”‚       â”œâ”€â”€ aspect-ratio.tsx
â”‚   â”‚       â”œâ”€â”€ avatar.tsx
â”‚   â”‚       â”œâ”€â”€ badge.tsx
â”‚   â”‚       â”œâ”€â”€ breadcrumb.tsx
â”‚   â”‚       â”œâ”€â”€ button.tsx
â”‚   â”‚       â”œâ”€â”€ calendar.tsx
â”‚   â”‚       â”œâ”€â”€ card.tsx
â”‚   â”‚       â”œâ”€â”€ carousel.tsx
â”‚   â”‚       â”œâ”€â”€ chart.tsx
â”‚   â”‚       â”œâ”€â”€ checkbox.tsx
â”‚   â”‚       â”œâ”€â”€ collapsible.tsx
â”‚   â”‚       â”œâ”€â”€ command.tsx
â”‚   â”‚       â”œâ”€â”€ context-menu.tsx
â”‚   â”‚       â”œâ”€â”€ dialog.tsx
â”‚   â”‚       â”œâ”€â”€ drawer.tsx
â”‚   â”‚       â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚       â”œâ”€â”€ form.tsx
â”‚   â”‚       â”œâ”€â”€ hover-card.tsx
â”‚   â”‚       â”œâ”€â”€ input.tsx
â”‚   â”‚       â”œâ”€â”€ input-otp.tsx
â”‚   â”‚       â”œâ”€â”€ label.tsx
â”‚   â”‚       â”œâ”€â”€ menubar.tsx
â”‚   â”‚       â”œâ”€â”€ navigation-menu.tsx
â”‚   â”‚       â”œâ”€â”€ pagination.tsx
â”‚   â”‚       â”œâ”€â”€ popover.tsx
â”‚   â”‚       â”œâ”€â”€ progress.tsx
â”‚   â”‚       â”œâ”€â”€ radio-group.tsx
â”‚   â”‚       â”œâ”€â”€ resizable.tsx
â”‚   â”‚       â”œâ”€â”€ scroll-area.tsx
â”‚   â”‚       â”œâ”€â”€ select.tsx
â”‚   â”‚       â”œâ”€â”€ separator.tsx
â”‚   â”‚       â”œâ”€â”€ sheet.tsx
â”‚   â”‚       â”œâ”€â”€ sidebar.tsx
â”‚   â”‚       â”œâ”€â”€ skeleton.tsx
â”‚   â”‚       â”œâ”€â”€ slider.tsx
â”‚   â”‚       â”œâ”€â”€ sonner.tsx
â”‚   â”‚       â”œâ”€â”€ switch.tsx
â”‚   â”‚       â”œâ”€â”€ table.tsx
â”‚   â”‚       â”œâ”€â”€ tabs.tsx
â”‚   â”‚       â”œâ”€â”€ textarea.tsx
â”‚   â”‚       â”œâ”€â”€ toast.tsx
â”‚   â”‚       â”œâ”€â”€ toaster.tsx
â”‚   â”‚       â”œâ”€â”€ toggle.tsx
â”‚   â”‚       â”œâ”€â”€ toggle-group.tsx
â”‚   â”‚       â”œâ”€â”€ tooltip.tsx
â”‚   â”‚       â””â”€â”€ use-toast.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ use-auth.tsx
â”‚   â”‚   â”œâ”€â”€ use-mobile.tsx
â”‚   â”‚   â”œâ”€â”€ use-profile.tsx
â”‚   â”‚   â”œâ”€â”€ use-theme.tsx
â”‚   â”‚   â””â”€â”€ use-toast.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ integrations/
â”‚   â”‚   â””â”€â”€ supabase/
â”‚   â”‚       â”œâ”€â”€ client.ts
â”‚   â”‚       â””â”€â”€ types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ localResumeAnalyzer.ts
â”‚   â”‚   â”œâ”€â”€ pdfGenerator.ts
â”‚   â”‚   â”œâ”€â”€ pdfParser.ts
â”‚   â”‚   â”œâ”€â”€ resumePdfGenerator.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”‚
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ Index.tsx
â”‚       â””â”€â”€ NotFound.tsx
â”‚
â””â”€â”€ supabase/
    â”œâ”€â”€ config.toml
    â””â”€â”€ functions/
        â”œâ”€â”€ analyze-resume/
        â”‚   â””â”€â”€ index.ts
        â”œâ”€â”€ generate-improved-resume/
        â”‚   â””â”€â”€ index.ts
        â””â”€â”€ resume-chat/
            â””â”€â”€ index.ts

================================================================================
                                 SOURCE FILES
================================================================================


================================================================================
FILE: src/App.tsx
================================================================================
import { Toaster } from "@/components/ui/toaster";
import { Toaster as Sonner } from "@/components/ui/sonner";
import { TooltipProvider } from "@/components/ui/tooltip";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import { ThemeProvider } from "@/hooks/use-theme";
import { AuthProvider } from "@/hooks/use-auth";
import { ProfileProvider } from "@/hooks/use-profile";
import Index from "./pages/Index";
import NotFound from "./pages/NotFound";

const queryClient = new QueryClient();

const App = () => {
  return (
    <QueryClientProvider client={queryClient}>
      <ThemeProvider>
        <AuthProvider>
          <ProfileProvider>
            <TooltipProvider>
              <Toaster />
              <Sonner />
              <BrowserRouter>
                <Routes>
                  <Route path="/" element={<Index />} />
                  {/* ADD ALL CUSTOM ROUTES ABOVE THE CATCH-ALL "*" ROUTE */}
                  <Route path="*" element={<NotFound />} />
                </Routes>
              </BrowserRouter>
            </TooltipProvider>
          </ProfileProvider>
        </AuthProvider>
      </ThemeProvider>
    </QueryClientProvider>
  );
};

export default App;


================================================================================
FILE: src/main.tsx
================================================================================
import { createRoot } from "react-dom/client";
import App from "./App.tsx";
import "./index.css";

createRoot(document.getElementById("root")!).render(<App />);


================================================================================
FILE: src/pages/Index.tsx
================================================================================
import Header from "@/components/Header";
import HeroSection from "@/components/HeroSection";
import AnalyzerSection from "@/components/AnalyzerSection";
import ResumeGuideSection from "@/components/ResumeGuideSection";
import Footer from "@/components/Footer";

const Index = () => {
  return (
    <div className="min-h-screen bg-background">
      <Header />
      <main>
        <HeroSection />
        <AnalyzerSection />
        <ResumeGuideSection />
      </main>
      <Footer />
    </div>
  );
};

export default Index;


================================================================================
FILE: src/components/Header.tsx
================================================================================
import { FileText, Menu } from "lucide-react";
import { Button } from "./ui/button";
import { useState, useEffect } from "react";
import ThemeToggle from "./ThemeToggle";
import UserMenu from "./auth/UserMenu";
const Header = () => {
  const [scrolled, setScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 20);
    };
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return (
    <header 
      className={`w-full sticky top-0 z-50 transition-all duration-300 ${
        scrolled 
          ? "bg-card/90 backdrop-blur-lg border-b border-border shadow-card" 
          : "bg-transparent"
      }`}
    >
      <div className="container mx-auto px-4 py-4 flex items-center justify-between">
        <a href="/" className="flex items-center gap-3 group">
          <div className="w-10 h-10 rounded-xl gradient-hero flex items-center justify-center shadow-card transition-all duration-300 group-hover:shadow-elevated group-hover:scale-105">
            <FileText className="w-5 h-5 text-primary-foreground transition-transform group-hover:rotate-6" />
          </div>
          <div>
            <h1 className="font-display text-xl font-bold text-foreground tracking-tight group-hover:text-primary transition-colors">
              AIcruit
            </h1>
            <p className="text-xs text-muted-foreground">Smart Resume Analysis</p>
          </div>
        </a>
        
        <nav className="hidden md:flex items-center gap-8">
          {[
            { href: "#analyzer", label: "Analyzer" },
            { href: "#guide", label: "Resume Guide" },
          ].map((link) => (
            <a 
              key={link.href}
              href={link.href} 
              className="relative text-sm font-medium text-muted-foreground hover:text-foreground transition-colors group"
            >
              {link.label}
              <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary rounded-full transition-all duration-300 group-hover:w-full" />
            </a>
          ))}
        </nav>

        <div className="flex items-center gap-3">
          <ThemeToggle />
          <UserMenu />
          
          {/* Mobile menu button */}
          <Button 
            variant="ghost" 
            size="icon" 
            className="md:hidden"
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
          >
            <Menu className="w-5 h-5" />
          </Button>
        </div>
      </div>

      {/* Mobile menu */}
      {mobileMenuOpen && (
        <div className="md:hidden absolute top-full left-0 right-0 bg-card/95 backdrop-blur-lg border-b border-border shadow-elevated animate-slide-down">
          <nav className="container mx-auto px-4 py-4 flex flex-col gap-2">
            {[
              { href: "#analyzer", label: "Analyzer" },
              { href: "#guide", label: "Resume Guide" },
            ].map((link) => (
              <a 
                key={link.href}
                href={link.href} 
                className="text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted/50 px-4 py-3 rounded-lg transition-all"
                onClick={() => setMobileMenuOpen(false)}
              >
                {link.label}
              </a>
            ))}
          </nav>
        </div>
      )}
    </header>
  );
};

export default Header;


================================================================================
FILE: src/components/ThemeToggle.tsx
================================================================================
import { Moon, Sun } from "lucide-react";
import { Button } from "./ui/button";
import { useTheme } from "@/hooks/use-theme";

const ThemeToggle = () => {
  const { theme, toggleTheme } = useTheme();

  return (
    <Button
      variant="ghost"
      size="icon"
      onClick={toggleTheme}
      className="relative overflow-hidden group"
      aria-label="Toggle theme"
    >
      <Sun className={`h-5 w-5 transition-all duration-300 ${
        theme === 'dark' ? 'rotate-90 scale-0 opacity-0' : 'rotate-0 scale-100 opacity-100'
      }`} />
      <Moon className={`absolute h-5 w-5 transition-all duration-300 ${
        theme === 'dark' ? 'rotate-0 scale-100 opacity-100' : '-rotate-90 scale-0 opacity-0'
      }`} />
    </Button>
  );
};

export default ThemeToggle;


================================================================================
FILE: src/components/auth/UserMenu.tsx
================================================================================
import { useState } from "react";
import { useAuth } from "@/hooks/use-auth";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { User, LogOut, Loader2 } from "lucide-react";
import AuthModal from "./AuthModal";
import ProfileSettingsDialog from "@/components/profile/ProfileSettingsDialog";

const UserMenu = () => {
  const { user, isLoading, signOut } = useAuth();
  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);

  if (isLoading) {
    return (
      <Button variant="ghost" size="icon" disabled>
        <Loader2 className="h-4 w-4 animate-spin" />
      </Button>
    );
  }

  if (!user) {
    return (
      <>
        <Button variant="outline" onClick={() => setIsAuthModalOpen(true)}>
          <User className="h-4 w-4 mr-2" />
          Sign In
        </Button>
        <AuthModal
          isOpen={isAuthModalOpen}
          onClose={() => setIsAuthModalOpen(false)}
        />
      </>
    );
  }

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="outline" className="gap-2">
          <div className="h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center">
            <User className="h-3.5 w-3.5 text-primary" />
          </div>
          <span className="max-w-[120px] truncate text-sm">
            {user.email?.split("@")[0]}
          </span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end" className="w-56">
        <div className="px-2 py-1.5">
          <p className="text-sm font-medium">{user.email}</p>
          <p className="text-xs text-muted-foreground">Signed in</p>
        </div>
        <DropdownMenuSeparator />
        <DropdownMenuItem asChild>
          <ProfileSettingsDialog />
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem onClick={signOut} className="text-destructive">
          <LogOut className="h-4 w-4 mr-2" />
          Sign Out
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
};

export default UserMenu;


================================================================================
FILE: src/components/auth/AuthModal.tsx
================================================================================
import { useState } from "react";
import { useAuth } from "@/hooks/use-auth";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Loader2, Mail, Lock, Eye, EyeOff } from "lucide-react";
import { toast } from "@/hooks/use-toast";

interface AuthModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const AuthModal = ({ isOpen, onClose }: AuthModalProps) => {
  const [isLogin, setIsLogin] = useState(true);
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [showPassword, setShowPassword] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const { signIn, signUp } = useAuth();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      const { error } = isLogin
        ? await signIn(email, password)
        : await signUp(email, password);

      if (error) {
        toast({
          title: isLogin ? "Login Failed" : "Sign Up Failed",
          description: error.message,
          variant: "destructive",
        });
      } else {
        toast({
          title: isLogin ? "Welcome back!" : "Account created!",
          description: isLogin
            ? "You have successfully logged in."
            : "You can now start using the app.",
        });
        onClose();
        setEmail("");
        setPassword("");
      }
    } finally {
      setIsLoading(false);
    }
  };

  const toggleMode = () => {
    setIsLogin(!isLogin);
    setEmail("");
    setPassword("");
  };

  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent className="sm:max-w-[400px]">
        <DialogHeader>
          <DialogTitle className="text-xl">
            {isLogin ? "Welcome Back" : "Create Account"}
          </DialogTitle>
          <DialogDescription>
            {isLogin
              ? "Sign in to access your resume analysis history"
              : "Create an account to save your resume analyses"}
          </DialogDescription>
        </DialogHeader>

        <form onSubmit={handleSubmit} className="space-y-4 mt-4">
          <div className="space-y-2">
            <Label htmlFor="email">Email</Label>
            <div className="relative">
              <Mail className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
              <Input
                id="email"
                type="email"
                placeholder="you@example.com"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="pl-10"
                required
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="password">Password</Label>
            <div className="relative">
              <Lock className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
              <Input
                id="password"
                type={showPassword ? "text" : "password"}
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="pl-10 pr-10"
                required
                minLength={6}
              />
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
              >
                {showPassword ? (
                  <EyeOff className="h-4 w-4" />
                ) : (
                  <Eye className="h-4 w-4" />
                )}
              </button>
            </div>
          </div>

          <Button type="submit" className="w-full" disabled={isLoading}>
            {isLoading ? (
              <>
                <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                {isLogin ? "Signing in..." : "Creating account..."}
              </>
            ) : isLogin ? (
              "Sign In"
            ) : (
              "Create Account"
            )}
          </Button>
        </form>

        <div className="mt-4 text-center text-sm">
          <span className="text-muted-foreground">
            {isLogin ? "Don't have an account?" : "Already have an account?"}
          </span>{" "}
          <button
            type="button"
            onClick={toggleMode}
            className="text-primary hover:underline font-medium"
          >
            {isLogin ? "Sign up" : "Sign in"}
          </button>
        </div>
      </DialogContent>
    </Dialog>
  );
};

export default AuthModal;


================================================================================
FILE: src/components/profile/ProfileSettingsDialog.tsx
================================================================================
import { useState } from "react";
import { Settings, Key, Eye, EyeOff, Trash2, Loader2, CheckCircle } from "lucide-react";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Separator } from "@/components/ui/separator";
import { toast } from "@/hooks/use-toast";
import { useProfile } from "@/hooks/use-profile";
import { useAuth } from "@/hooks/use-auth";

// Inner component that uses profile hook - only mounted when dialog opens
const ProfileSettingsContent = ({ onClose }: { onClose: () => void }) => {
  const { user } = useAuth();
  const { hasApiKey, updateGeminiApiKey, clearGeminiApiKey } = useProfile();
  const [newApiKey, setNewApiKey] = useState("");
  const [showApiKey, setShowApiKey] = useState(false);
  const [isSaving, setIsSaving] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);

  const handleUpdateApiKey = async () => {
    if (!newApiKey.trim()) {
      toast({
        title: "API Key Required",
        description: "Please enter a new API key.",
        variant: "destructive",
      });
      return;
    }

    setIsSaving(true);
    try {
      const { error } = await updateGeminiApiKey(newApiKey.trim());
      
      if (error) {
        throw error;
      }

      toast({
        title: "API Key Updated",
        description: "Your Gemini API key has been updated successfully.",
      });
      
      setNewApiKey("");
      setShowApiKey(false);
    } catch (err) {
      toast({
        title: "Update Failed",
        description: err instanceof Error ? err.message : "Could not update API key.",
        variant: "destructive",
      });
    } finally {
      setIsSaving(false);
    }
  };

  const handleDeleteApiKey = async () => {
    setIsDeleting(true);
    try {
      const { error } = await clearGeminiApiKey();
      
      if (error) {
        throw error;
      }

      toast({
        title: "API Key Removed",
        description: "Your Gemini API key has been removed.",
      });
    } catch (err) {
      toast({
        title: "Removal Failed",
        description: err instanceof Error ? err.message : "Could not remove API key.",
        variant: "destructive",
      });
    } finally {
      setIsDeleting(false);
    }
  };

  return (
    <>
      <DialogHeader>
        <DialogTitle className="flex items-center gap-2">
          <Settings className="w-5 h-5" />
          Profile Settings
        </DialogTitle>
        <DialogDescription>
          Manage your account settings and API keys.
        </DialogDescription>
      </DialogHeader>

      <div className="space-y-6 py-4">
        {/* Account Info */}
        <div className="space-y-2">
          <Label className="text-muted-foreground text-xs uppercase tracking-wide">Account</Label>
          <p className="text-sm">{user?.email}</p>
        </div>

        <Separator />

        {/* API Key Section */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-2">
              <Key className="w-4 h-4 text-primary" />
              <Label>Gemini API Key</Label>
            </div>
            {hasApiKey && (
              <div className="flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400">
                <CheckCircle className="w-3 h-3" />
                Configured
              </div>
            )}
          </div>

          {hasApiKey ? (
            <div className="space-y-3">
              <p className="text-sm text-muted-foreground">
                You have an API key configured. You can update or remove it below.
              </p>
              
              <div className="space-y-2">
                <Label htmlFor="new-api-key" className="text-sm">New API Key (optional)</Label>
                <div className="relative">
                  <Input
                    id="new-api-key"
                    type={showApiKey ? "text" : "password"}
                    placeholder="Enter new API key to replace..."
                    value={newApiKey}
                    onChange={(e) => setNewApiKey(e.target.value)}
                    className="pr-10"
                  />
                  <button
                    type="button"
                    onClick={() => setShowApiKey(!showApiKey)}
                    className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"
                  >
                    {showApiKey ? <EyeOff className="w-4 h-4" /> : <Eye className="w-4 h-4" />}
                  </button>
                </div>
              </div>

              <div className="flex gap-2">
                <Button
                  size="sm"
                  onClick={handleUpdateApiKey}
                  disabled={isSaving || !newApiKey.trim()}
                >
                  {isSaving ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin mr-1" />
                      Updating...
                    </>
                  ) : (
                    "Update Key"
                  )}
                </Button>
                <Button
                  size="sm"
                  variant="destructive"
                  onClick={handleDeleteApiKey}
                  disabled={isDeleting}
                >
                  {isDeleting ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin mr-1" />
                      Removing...
                    </>
                  ) : (
                    <>
                      <Trash2 className="w-4 h-4 mr-1" />
                      Remove
                    </>
                  )}
                </Button>
              </div>
            </div>
          ) : (
            <div className="bg-muted/50 rounded-lg p-3 text-sm text-muted-foreground">
              <p>No API key configured. You'll be prompted to enter one when using AI Review mode.</p>
            </div>
          )}
        </div>
      </div>
    </>
  );
};

const ProfileSettingsDialog = () => {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <Dialog open={isOpen} onOpenChange={setIsOpen}>
      <DialogTrigger asChild>
        <Button variant="ghost" size="sm" className="w-full justify-start">
          <Settings className="w-4 h-4 mr-2" />
          Settings
        </Button>
      </DialogTrigger>
      <DialogContent className="sm:max-w-md">
        {isOpen && <ProfileSettingsContent onClose={() => setIsOpen(false)} />}
      </DialogContent>
    </Dialog>
  );
};

export default ProfileSettingsDialog;


================================================================================
FILE: src/components/profile/ApiKeyDialog.tsx
================================================================================
import { useState } from "react";
import { Key, Eye, EyeOff, ExternalLink, Loader2 } from "lucide-react";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { toast } from "@/hooks/use-toast";
import { useProfile } from "@/hooks/use-profile";

interface ApiKeyDialogProps {
  isOpen: boolean;
  onClose: () => void;
  onSuccess?: () => void;
}

const ApiKeyDialog = ({ isOpen, onClose, onSuccess }: ApiKeyDialogProps) => {
  const { updateGeminiApiKey } = useProfile();
  const [apiKey, setApiKey] = useState("");
  const [showApiKey, setShowApiKey] = useState(false);
  const [isSaving, setIsSaving] = useState(false);

  const handleSave = async () => {
    if (!apiKey.trim()) {
      toast({
        title: "API Key Required",
        description: "Please enter your Gemini API key.",
        variant: "destructive",
      });
      return;
    }

    setIsSaving(true);
    try {
      const { error } = await updateGeminiApiKey(apiKey.trim());
      
      if (error) {
        throw error;
      }

      toast({
        title: "API Key Saved",
        description: "Your Gemini API key has been securely stored.",
      });
      
      setApiKey("");
      onClose();
      onSuccess?.();
    } catch (err) {
      toast({
        title: "Failed to Save",
        description: err instanceof Error ? err.message : "Could not save API key.",
        variant: "destructive",
      });
    } finally {
      setIsSaving(false);
    }
  };

  const handleClose = () => {
    setApiKey("");
    setShowApiKey(false);
    onClose();
  };

  return (
    <Dialog open={isOpen} onOpenChange={handleClose}>
      <DialogContent className="sm:max-w-md">
        <DialogHeader>
          <DialogTitle className="flex items-center gap-2">
            <Key className="w-5 h-5 text-primary" />
            Enter Gemini API Key
          </DialogTitle>
          <DialogDescription>
            Your API key will be securely stored and used for AI-powered resume analysis.
          </DialogDescription>
        </DialogHeader>

        <div className="space-y-4 py-4">
          <div className="space-y-2">
            <Label htmlFor="api-key">Gemini API Key</Label>
            <div className="relative">
              <Input
                id="api-key"
                type={showApiKey ? "text" : "password"}
                placeholder="Enter your API key..."
                value={apiKey}
                onChange={(e) => setApiKey(e.target.value)}
                className="pr-10"
                autoFocus
              />
              <button
                type="button"
                onClick={() => setShowApiKey(!showApiKey)}
                className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors"
              >
                {showApiKey ? <EyeOff className="w-4 h-4" /> : <Eye className="w-4 h-4" />}
              </button>
            </div>
          </div>

          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <ExternalLink className="w-4 h-4 flex-shrink-0" />
            <span>
              Get your free API key from{" "}
              <a
                href="https://aistudio.google.com/apikey"
                target="_blank"
                rel="noopener noreferrer"
                className="text-primary hover:underline"
              >
                Google AI Studio
              </a>
            </span>
          </div>

          <div className="bg-muted/50 rounded-lg p-3 text-sm text-muted-foreground">
            <p className="font-medium text-foreground mb-1">ðŸ”’ Secure Storage</p>
            <p>Your API key is encrypted and stored securely. It will only be used for AI resume analysis.</p>
          </div>
        </div>

        <div className="flex justify-end gap-3">
          <Button variant="outline" onClick={handleClose} disabled={isSaving}>
            Cancel
          </Button>
          <Button onClick={handleSave} disabled={isSaving || !apiKey.trim()}>
            {isSaving ? (
              <>
                <Loader2 className="w-4 h-4 animate-spin mr-2" />
                Saving...
              </>
            ) : (
              "Save API Key"
            )}
          </Button>
        </div>
      </DialogContent>
    </Dialog>
  );
};

export default ApiKeyDialog;


================================================================================
FILE: src/hooks/use-auth.tsx
================================================================================
import { createContext, useContext, useEffect, useState, ReactNode } from 'react';
import { User, Session } from '@supabase/supabase-js';
import { supabase } from '@/integrations/supabase/client';

interface AuthContextType {
  user: User | null;
  session: Session | null;
  isLoading: boolean;
  signUp: (email: string, password: string) => Promise<{ error: Error | null }>;
  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;
  signOut: () => Promise<void>;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);
  const [session, setSession] = useState<Session | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    let isMounted = true;

    // Set up auth state listener FIRST
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (event, session) => {
        if (isMounted) {
          setSession(session);
          setUser(session?.user ?? null);
        }
      }
    );

    // THEN get initial session
    const initializeAuth = async () => {
      try {
        const { data: { session } } = await supabase.auth.getSession();
        if (isMounted) {
          setSession(session);
          setUser(session?.user ?? null);
        }
      } finally {
        if (isMounted) setIsLoading(false);
      }
    };

    initializeAuth();

    return () => {
      isMounted = false;
      subscription.unsubscribe();
    };
  }, []);

  const signUp = async (email: string, password: string) => {
    const { error } = await supabase.auth.signUp({
      email,
      password,
      options: {
        emailRedirectTo: window.location.origin,
      },
    });
    return { error: error as Error | null };
  };

  const signIn = async (email: string, password: string) => {
    const { error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });
    return { error: error as Error | null };
  };

  const signOut = async () => {
    await supabase.auth.signOut();
  };

  return (
    <AuthContext.Provider value={{ user, session, isLoading, signUp, signIn, signOut }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};


================================================================================
FILE: src/hooks/use-profile.tsx
================================================================================
import { createContext, useContext, useEffect, useState, ReactNode, useCallback } from 'react';
import { supabase } from '@/integrations/supabase/client';
import { useAuth } from './use-auth';

interface Profile {
  id: string;
  user_id: string;
  gemini_api_key: string | null;
  display_name: string | null;
  created_at: string;
  updated_at: string;
}

interface ProfileContextType {
  profile: Profile | null;
  isLoading: boolean;
  geminiApiKey: string | null;
  hasApiKey: boolean;
  updateGeminiApiKey: (apiKey: string) => Promise<{ error: Error | null }>;
  clearGeminiApiKey: () => Promise<{ error: Error | null }>;
  refreshProfile: () => Promise<void>;
}

const ProfileContext = createContext<ProfileContextType | undefined>(undefined);

export const ProfileProvider = ({ children }: { children: ReactNode }) => {
  const { user } = useAuth();
  const [profile, setProfile] = useState<Profile | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const fetchProfile = useCallback(async () => {
    if (!user) {
      setProfile(null);
      setIsLoading(false);
      return;
    }

    setIsLoading(true);
    try {
      const { data, error } = await (supabase as any)
        .from('profiles')
        .select('*')
        .eq('user_id', user.id)
        .single();

      if (error) {
        // Profile might not exist yet (for existing users before migration)
        if (error.code === 'PGRST116') {
          // Create profile for existing user
          const { data: newProfile, error: insertError } = await (supabase as any)
            .from('profiles')
            .insert({ user_id: user.id })
            .select()
            .single();

          if (!insertError && newProfile) {
            setProfile(newProfile);
          }
        } else {
          console.error('Error fetching profile:', error);
        }
      } else {
        setProfile(data);
      }
    } catch (err) {
      console.error('Profile fetch error:', err);
    } finally {
      setIsLoading(false);
    }
  }, [user]);

  useEffect(() => {
    fetchProfile();
  }, [fetchProfile]);

  const updateGeminiApiKey = async (apiKey: string): Promise<{ error: Error | null }> => {
    if (!user || !profile) {
      return { error: new Error('No user or profile found') };
    }

    try {
      const { error } = await (supabase as any)
        .from('profiles')
        .update({ gemini_api_key: apiKey.trim() || null })
        .eq('user_id', user.id);

      if (error) {
        return { error: new Error(error.message) };
      }

      // Update local state
      setProfile(prev => prev ? { ...prev, gemini_api_key: apiKey.trim() || null } : null);
      return { error: null };
    } catch (err) {
      return { error: err instanceof Error ? err : new Error('Failed to update API key') };
    }
  };

  const clearGeminiApiKey = async (): Promise<{ error: Error | null }> => {
    return updateGeminiApiKey('');
  };

  const refreshProfile = async () => {
    await fetchProfile();
  };

  return (
    <ProfileContext.Provider
      value={{
        profile,
        isLoading,
        geminiApiKey: profile?.gemini_api_key || null,
        hasApiKey: Boolean(profile?.gemini_api_key),
        updateGeminiApiKey,
        clearGeminiApiKey,
        refreshProfile,
      }}
    >
      {children}
    </ProfileContext.Provider>
  );
};

export const useProfile = () => {
  const context = useContext(ProfileContext);
  if (context === undefined) {
    throw new Error('useProfile must be used within a ProfileProvider');
  }
  return context;
};


================================================================================
FILE: src/hooks/use-theme.tsx
================================================================================
import { createContext, useContext, useEffect, useState, ReactNode } from 'react';

type Theme = 'light' | 'dark';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
  setTheme: (theme: Theme) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [theme, setTheme] = useState<Theme>(() => {
    if (typeof window !== 'undefined') {
      const stored = localStorage.getItem('theme') as Theme;
      if (stored) return stored;
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    return 'light';
  });

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');
    root.classList.add(theme);
    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme() {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
}


================================================================================
FILE: src/lib/utils.ts
================================================================================
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}


================================================================================
FILE: tailwind.config.ts
================================================================================
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: ["./pages/**/*.{ts,tsx}", "./components/**/*.{ts,tsx}", "./app/**/*.{ts,tsx}", "./src/**/*.{ts,tsx}"],
  prefix: "",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        display: ['Instrument Sans', 'system-ui', 'sans-serif'],
      },
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        score: {
          excellent: "hsl(var(--score-excellent))",
          good: "hsl(var(--score-good))",
          average: "hsl(var(--score-average))",
          poor: "hsl(var(--score-poor))",
        },
        sidebar: {
          DEFAULT: "hsl(var(--sidebar-background))",
          foreground: "hsl(var(--sidebar-foreground))",
          primary: "hsl(var(--sidebar-primary))",
          "primary-foreground": "hsl(var(--sidebar-primary-foreground))",
          accent: "hsl(var(--sidebar-accent))",
          "accent-foreground": "hsl(var(--sidebar-accent-foreground))",
          border: "hsl(var(--sidebar-border))",
          ring: "hsl(var(--sidebar-ring))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
        "shimmer": {
          "0%": { backgroundPosition: "-200% 0" },
          "100%": { backgroundPosition: "200% 0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
        "shimmer": "shimmer 2s linear infinite",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config;


================================================================================
                              NOTE ON FILE LENGTH
================================================================================

This document contains the main source files for the AIcruit project.

For brevity, the following files are not included in full:
- UI component files (src/components/ui/*.tsx) - These are standard shadcn/ui components
- Large components (AnalyzerSection.tsx, ResultsSection.tsx, etc.) - Core logic shown in project
- Edge functions (supabase/functions/*) - Backend API endpoints

The complete project structure and key files are documented above.
For the full codebase, please refer to the project repository.

================================================================================
                                    END OF FILE
================================================================================
